server:
  ## dubbo: 8899
  port: 8888
  tomcat:
    uri-encoding: UTF-8
  servlet:
    context-path: /api

spring:
  application:
    name: test-app
  cloud:
    # nacos 配置中心
    nacos:
      username: nacos
      password: nacos
      discovery:
        server-addr: 192.168.9.200:8848
        namespace: blog-mico-service-dev
      config:
        import-check:
          enabled: false
        # 当前服务启动后去 nacos 中读取配置文件的后缀
        file-extension: yaml
        # 读取配置的 nacos 地址
        server-addr: 192.168.9.200:8848
        # 读取配置的 nacos 的名空间
        namespace: blog-mico-service-dev
      datasource:
        test-app-flow:
          nacos:
            server-addr: 192.168.9.200:8848
            username: nacos
            password: nacos
            namespace: blog-mico-service-dev
            data-id: ${spring.application.name}-flow-rules
            group-id: SENTINEL_GROUP
            rule-type: flow
            data-type: json
  config:
    import:
      - optional:nacos:test-app.yaml

jetcache:
  ## 统计间隔, 单位分钟, 0 标识不统计
  statIntervalMinutes: 15
  ## 是否将areaName作为缓存key前缀, false更合理
  areaInCacheName: false
  ## 隐藏的包名前缀, 用于缩短自动生成的缓存名
  heddenPackages: org.cy.micoservice.blog.test
  ## 本地缓存配置
  local:
    default:
      # 本地缓存类型: linked-hashmap 或 caffeine(推荐)
      type: caffeine #other choose：caffeine
      # 本地缓存最大元素数量
      limit: 100
      # key转换器
      keyConvertor: fastjson2 #other choose：fastjson/jackson
      # 本地缓存过期时间(毫秒)
      expireAfterWriteInMillis: 300000
  ## 远程缓存配置(Redis)
  remote:
    default:
      # 远程缓存客户端类型: jedis or lettuce(推荐)
      type: redis.lettuce
      # key转换器
      keyConvertor: fastjson2 #other choose：fastjson2/jackson
      # 广播通道: 用于多节点缓存同步
      # 当缓存更新 / 删除时, 通过 Redis pub/sub 通知其他节点使本地缓存失效
      broadcastChannel: test-app-cache-sync
      ## 值编码器 (java / kryo / kryo5)
      valueEncoder: java #other choose：kryo/kryo5
      ## 值解码器
      valueDecoder: java #other choose：kryo/kryo5
      # 本地缓存过期时间(毫秒)
      expireAfterWriteInMillis: 1800000
      ## remote 缓存连接地址
      uri: redis://green-123!%40qj@192.168.9.200:6606/

# spring boot 3.x 专属 Actuator + prometheus 配置
management:
  endpoints:
    web:
      exposure:
        include: [prometheus, health, info]
      base-path: /actuator
  metrics:
    tags:
      application: ${spring.application.name} # 全局标签，所有指标都会携带该 key-value
    export:
      prometheus:
        enabled: true
  # 可选：健康检查详细程度
  endpoint:
    health:
      show-details: always  # 始终显示健康检查详细信息, 按需配置（never/when_authorized/always）

infra:
  console:
    service-name: blog-infra-console
    service-group: DEFAULT_GROUP
    sdk:
      nacos:
        namespace: blog-mico-service-dev
        address: 192.168.9.200:8848
        user: nacos
        pwd: nacos

identify:
  secret-key: PIhqklxMNarWuqoNFFGJ5QGgesg==hkl1UBGlqopaKHKq9123h1
  access-token:
    expire-time: 604800
auth:
  template: jwt


## gateway
gateway:
  decrypty:
    secret-key: PxMNarWuqoNFFGJ5QGgesg==